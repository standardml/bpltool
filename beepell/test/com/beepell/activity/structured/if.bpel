<?xml version="1.0" encoding="ISO-8859-1"?>

<process
  name="proxy"
  targetNamespace="http://beepell.com/samples/proxy"
  xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
  xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
  xmlns:srv="http://beepell.com/samples/proxy/definitions"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema"
  xmlns:tim="http://tim.hallwyl.dk/"
  xmlns:ins="http://tim.hallwyl.dk/insurance"
  xmlns:sref="http://docs.oasis-open.org/wsbpel/2.0/serviceref">

  <import importType="http://schemas.xmlsoap.org/wsdl/" namespace="http://beepell.com/samples/proxy/definitions" location="if.wsdl" />   

  <partnerLinks>
    <partnerLink
      name="echoPartnerLink"
      partnerLinkType="srv:echoPartnerLinkType"
      myRole="echoProviderRole" />
  </partnerLinks>
  
  <variables>
    <variable name="request" messageType="srv:echoMessage" />
  </variables>
  
  <sequence>
      <receive
      partnerLink="echoPartnerLink"
      operation="echoOperation"
      variable="request"
      createInstance="yes"/>
   
    <if>
      <condition>$request.text = 'main'</condition>
      <assign>
        <copy>
          <from><literal>MAIN</literal></from>
          <to variable="request" part="text" />
        </copy>
      </assign>
      <elseif>
        <condition>$request.text = 'first elseif'</condition>
        <assign>
          <copy>
            <from><literal>FIRST ELSEIF</literal></from>
            <to variable="request" part="text" />
          </copy>
        </assign>
      </elseif>
      <elseif>
        <condition>$request.text = 'second elseif'</condition>
        <assign>
          <copy>
            <from><literal>SECOND ELSEIF</literal></from>
            <to variable="request" part="text" />
          </copy>
        </assign>
      </elseif>
      <elseif>
        <condition>$request.text = 'third elseif'</condition>
        <assign>
          <copy>
            <from><literal>THIRD ELSEIF</literal></from>
            <to variable="request" part="text" />
          </copy>
        </assign>
      </elseif>
      <else>
        <assign>
          <copy>
            <from><literal>ELSE</literal></from>
            <to variable="request" part="text" />
          </copy>
        </assign>
      </else>
    </if>

  
      <reply
      partnerLink="echoPartnerLink"
      operation="echoOperation"
      variable="request"/>
  
  </sequence>  
  
</process>