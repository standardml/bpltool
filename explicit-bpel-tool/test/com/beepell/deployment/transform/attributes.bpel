<?xml version="1.0" encoding="UTF-8"?>
<process
  name="attributes"
  targetNamespace="http://beepell.com/samples/attributes"
  xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
  xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
  xmlns:srv="http://beepell.com/samples/proxy/definitions"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema"
  xmlns:sref="http://docs.oasis-open.org/wsbpel/2.0/serviceref"
  exitOnStandardFault="yes"
  suppressJoinFailure="yes">

  <import
    importType="http://schemas.xmlsoap.org/wsdl/"
    namespace="http://beepell.com/samples/proxy/definitions"
    location="echo.wsdl" />

  <partnerLinks>
    <partnerLink
      name="echoPartnerLink"
      partnerLinkType="srv:echoPartnerLinkType"
      myRole="echoProviderRole" />
  </partnerLinks>

  <scope name="a">
    <variables>
      <variable
        name="request"
        messageType="srv:echoMessage" />
      <variable
        name="response"
        messageType="srv:echoMessage" />
    </variables>

    <sequence>
	    <scope name="b" exitOnStandardFault="no" suppressJoinFailure="no">
	      <sequence>
	        <receive
	          partnerLink="echoPartnerLink"
	          operation="echoOperation"
	          variable="request"
	          createInstance="yes" />
	
	        <scope 
	          name="c">
	          <sequence>
		          <assign suppressJoinFailure="yes">
		            <copy>
		              <from
		                variable="request" />
		              <to
		                variable="response" />
		            </copy>
		          </assign>
		          <empty />
            </sequence>
	        </scope>
	
	        <reply
	          partnerLink="echoPartnerLink"
	          operation="echoOperation"
	          variable="response" />
	      </sequence>
	    </scope>
	    <empty />
    </sequence>
    
  </scope>

</process>
